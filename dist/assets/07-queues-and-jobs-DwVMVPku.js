import{p as r,j as e}from"./entry.client-CAKTKa86.js";const l="Local (with composer):",d=[{depth:1,text:"07 – Queues & Jobs",id:"07--queues--jobs",children:[{depth:2,text:"Queue Configuration",id:"queue-configuration"},{depth:2,text:"Job Classes",id:"job-classes"},{depth:2,text:"Why 600s Timeout?",id:"why-600s-timeout"},{depth:2,text:"Running the Worker",id:"running-the-worker"},{depth:2,text:"Failed Jobs",id:"failed-jobs"}]}],h={lastModifiedTime:"2026-02-27T08:47:41.972Z"},c="pages/07-queues-and-jobs.md";function n(s){const i={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...r(),...s.components};return e.jsxs(e.Fragment,{children:[e.jsx(i.h1,{id:"07--queues--jobs",children:"07 – Queues & Jobs"}),`
`,e.jsx(i.h2,{id:"queue-configuration",children:"Queue Configuration"}),`
`,e.jsxs(i.ul,{children:[`
`,e.jsxs(i.li,{children:[e.jsx(i.strong,{children:"Driver"}),": ",e.jsx(i.code,{inline:"true",children:"database"})," (default)"]}),`
`,e.jsxs(i.li,{children:[e.jsx(i.strong,{children:"Table"}),": ",e.jsx(i.code,{inline:"true",children:"jobs"})]}),`
`,e.jsxs(i.li,{children:[e.jsx(i.strong,{children:"Worker"}),": ",e.jsx(i.code,{inline:"true",children:"php artisan queue:work database --timeout=600 --tries=3 --memory=512 --sleep=3"})]}),`
`]}),`
`,e.jsx(i.h2,{id:"job-classes",children:"Job Classes"}),`
`,e.jsxs(i.table,{children:[e.jsx(i.thead,{children:e.jsxs(i.tr,{children:[e.jsx(i.th,{children:"Job"}),e.jsx(i.th,{children:"Timeout"}),e.jsx(i.th,{children:"Tries"}),e.jsx(i.th,{children:"Purpose"})]})}),e.jsxs(i.tbody,{children:[e.jsxs(i.tr,{children:[e.jsx(i.td,{children:e.jsx(i.code,{inline:"true",children:"ProcessAudioJob"})}),e.jsx(i.td,{children:"600s"}),e.jsx(i.td,{children:"3"}),e.jsx(i.td,{children:"Full pipeline: transcribe → translate → TTS"})]}),e.jsxs(i.tr,{children:[e.jsx(i.td,{children:e.jsx(i.code,{inline:"true",children:"ProcessAudioTTSJob"})}),e.jsx(i.td,{children:"600s"}),e.jsx(i.td,{children:"3"}),e.jsx(i.td,{children:"TTS only for audio file"})]}),e.jsxs(i.tr,{children:[e.jsx(i.td,{children:e.jsx(i.code,{inline:"true",children:"ProcessTextToAudioJob"})}),e.jsx(i.td,{children:"600s"}),e.jsx(i.td,{children:"3"}),e.jsx(i.td,{children:"Text-to-audio"})]}),e.jsxs(i.tr,{children:[e.jsx(i.td,{children:e.jsx(i.code,{inline:"true",children:"ProcessCsvTranslationJob"})}),e.jsx(i.td,{children:"7200s"}),e.jsx(i.td,{children:"3"}),e.jsx(i.td,{children:"CSV/XLSX translation (large files)"})]}),e.jsxs(i.tr,{children:[e.jsx(i.td,{children:e.jsx(i.code,{inline:"true",children:"ProcessAdditionalAudioTranslation"})}),e.jsx(i.td,{children:"600s"}),e.jsx(i.td,{children:"3"}),e.jsx(i.td,{children:"Additional translations"})]}),e.jsxs(i.tr,{children:[e.jsx(i.td,{children:e.jsx(i.code,{inline:"true",children:"ProcessAudioTranslationJob"})}),e.jsx(i.td,{children:"600s"}),e.jsx(i.td,{children:"3"}),e.jsx(i.td,{children:"Audio translation variant"})]})]})]}),`
`,e.jsx(i.h2,{id:"why-600s-timeout",children:"Why 600s Timeout?"}),`
`,e.jsxs(i.ul,{children:[`
`,e.jsx(i.li,{children:"TTS can be slow (180s HTTP timeout per request)"}),`
`,e.jsx(i.li,{children:"Multiple retries possible"}),`
`,e.jsx(i.li,{children:"Job must not be killed before HTTP request completes"}),`
`]}),`
`,e.jsx(i.h2,{id:"running-the-worker",children:"Running the Worker"}),`
`,e.jsx(i.p,{children:e.jsx(i.strong,{children:"Local (with composer):"})}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{children:e.jsx(i.code,{className:"language-bash shiki shiki-themes github-light github-dark",inline:"false",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",children:e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"composer"}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" run"}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" dev:full"})]})})})}),`
`,e.jsx(i.p,{children:e.jsx(i.strong,{children:"Production (supervisor/systemd):"})}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{children:e.jsx(i.code,{className:"language-bash shiki shiki-themes github-light github-dark",inline:"false",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",children:e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"php"}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" artisan"}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" queue:work"}),e.jsx(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" database"}),e.jsx(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" --timeout=600"}),e.jsx(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" --tries=3"}),e.jsx(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" --memory=512"}),e.jsx(i.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" --sleep=3"})]})})})}),`
`,e.jsxs(i.p,{children:[e.jsx(i.strong,{children:"Important"}),": Worker ",e.jsx(i.code,{inline:"true",children:"--timeout"})," must be ≥ job timeout (600). Otherwise the worker kills the process before the job finishes."]}),`
`,e.jsx(i.h2,{id:"failed-jobs",children:"Failed Jobs"}),`
`,e.jsxs(i.ul,{children:[`
`,e.jsxs(i.li,{children:["Failed jobs are logged via ",e.jsx(i.code,{inline:"true",children:"failed()"})," method on each job"]}),`
`,e.jsxs(i.li,{children:["Check ",e.jsx(i.code,{inline:"true",children:"storage/logs/laravel.log"})]}),`
`,e.jsxs(i.li,{children:["Use ",e.jsx(i.code,{inline:"true",children:"php artisan queue:failed"})," to list failed jobs"]}),`
`,e.jsxs(i.li,{children:["Use ",e.jsx(i.code,{inline:"true",children:"php artisan queue:retry all"})," to retry"]}),`
`]})]})}function o(s={}){const{wrapper:i}={...r(),...s.components};return i?e.jsx(i,{...s,children:e.jsx(n,{...s})}):n(s)}export{c as __filepath,o as default,l as excerpt,h as frontmatter,d as tableOfContents};
//# sourceMappingURL=07-queues-and-jobs-DwVMVPku.js.map
