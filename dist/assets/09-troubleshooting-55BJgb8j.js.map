{"version":3,"file":"09-troubleshooting-55BJgb8j.js","sources":["../../pages/09-troubleshooting.md"],"sourcesContent":["# 09 – Troubleshooting\r\n\r\n## Common Errors\r\n\r\n### 1. `Vertex AI API has not been used in project ... before or it is disabled`\r\n\r\n**Cause**: Vertex AI API not enabled in Google Cloud.\r\n\r\n**Fix**: Google Cloud Console → APIs & Services → Library → Enable **Vertex AI API**.\r\n\r\n---\r\n\r\n### 2. `cURL error 28: Operation timed out after 120002 milliseconds with 0 bytes received`\r\n\r\n**Cause**: TTS request timed out; sometimes slow or hanging response from Google.\r\n\r\n**Fix**:\r\n- Increase `GEMINI_TIMEOUT` to 180 or 240 in `.env`\r\n- Ensure queue worker runs with `--timeout=600`\r\n- Ensure `ProcessTextToAudioJob` and `ProcessAudioTTSJob` have `$timeout = 600`\r\n\r\n---\r\n\r\n### 3. `Google service account JSON file not found`\r\n\r\n**Cause**: Service account file missing or wrong path.\r\n\r\n**Fix**:\r\n- Place JSON at `storage/app/google-service-account.json`, or\r\n- Set `GOOGLE_SERVICE_ACCOUNT_JSON` (base64) in `.env`, or\r\n- Set `GOOGLE_SERVICE_ACCOUNT_PATH` to correct path\r\n\r\n---\r\n\r\n### 4. `403 Permission denied` (Google Cloud)\r\n\r\n**Cause**: Service account missing roles.\r\n\r\n**Fix**: Add roles: Cloud Translation API User, Cloud Text-to-Speech User, Service Usage Consumer. Optionally Vertex AI User if needed.\r\n\r\n---\r\n\r\n### 5. `429 Rate limit exceeded` (Gemini)\r\n\r\n**Cause**: TTS quota exceeded.\r\n\r\n**Fix**: Wait for quota reset, or upgrade Google Cloud. App has rate limiting (60/min per user).\r\n\r\n---\r\n\r\n### 6. Job stuck / processing never completes\r\n\r\n**Cause**: Queue worker not running or killed before job finishes.\r\n\r\n**Fix**:\r\n- Ensure `php artisan queue:work database --timeout=600` is running\r\n- Check worker logs\r\n- Check `storage/logs/laravel.log` for job errors\r\n\r\n---\r\n\r\n### 7. `504 Gateway Timeout` on web request\r\n\r\n**Cause**: Web server timeout; job runs in background but user waits for redirect.\r\n\r\n**Fix**: Jobs run async; user should be redirected to status page. If upload itself times out, increase PHP `max_execution_time` and web server timeout.\r\n\r\n---\r\n\r\n### 8. TTS works in Tinker but not in queue\r\n\r\n**Cause**: Queue worker may have different environment or timeout.\r\n\r\n**Fix**:\r\n- Ensure worker `--timeout=600`\r\n- Ensure job `$timeout = 600`\r\n- Run `php artisan config:clear` and `php artisan cache:clear` after config changes\r\n\r\n---\r\n\r\n## Logs\r\n\r\n```bash\r\n# Windows\r\nGet-Content storage/logs/laravel.log -Tail 50\r\n\r\n# Linux/Mac\r\ntail -f storage/logs/laravel.log\r\n```\r\n\r\n## Useful Commands\r\n\r\n```bash\r\nphp artisan config:clear\r\nphp artisan cache:clear\r\nphp artisan queue:failed\r\nphp artisan queue:retry all\r\nphp artisan tinker   # Test services manually\r\n```\r\n"],"names":["_jsx","_components"],"mappings":"6xIAAE,SAAA;iCAEC,SAAA;2FAEC,SAAA,CAAA,MAAAA,MAAAC,EAAA,KAAA,eAAG,SAAA;wCAEL,SAAA,OAAO,CAAA,EAAA,8CAAA;wCAEP,SAAA,KAAK,CAAA,EAAA,+DAAAD,MAAAC,EAAA,OAAA,CAA8D,SAAA,eAAe,CAAA,EAAA,GAAA;;wGAIhF,SAAA,CAAA,MAAAD,MAAAC,EAAA,KAAA,eAAG,SAAA;wCAEL,SAAA,OAAO,CAAA,EAAA,0EAAA;wCAEP,SAAA,KAAK,CAAA,EAAA,GAAA;;eACL,SAAA,CAAA,YAAAD,MAAAC,EAAA,KAAA,eAAS,SAAA,gBAAgB,CAAA,EAAA,qBAAAD,MAAAC,EAAA,KAAA,eAAkB,SAAA;eAC3C,SAAA,CAAA,iCAAAD,MAAAC,EAAA,KAAA,eAA8B,SAAA;eAC9B,SAAA,CAAA,UAAAD,MAAAC,EAAA,KAAA,eAAO,SAAA,uBAAuB,CAAA,EAAA,QAAAD,MAAAC,EAAA,KAAA,eAAK,SAAA,oBAAoB,CAAA,EAAA,SAAAD,MAAAC,EAAA,KAAA,eAAM,SAAA;;;iEAI3D,SAAA,CAAA,MAAAD,MAAAC,EAAA,KAAA,eAAG,SAAA;wCAEL,SAAA,OAAO,CAAA,EAAA,+CAAA;wCAEP,SAAA,KAAK,CAAA,EAAA,GAAA;;eACL,SAAA,CAAA,iBAAAD,MAAAC,EAAA,KAAA,eAAc,SAAA,yCAAyC,CAAA,EAAA,MAAA;eACvD,SAAA,CAAA,OAAAD,MAAAC,EAAA,KAAA,eAAI,SAAA,6BAA6B,CAAA,EAAA,gBAAAD,MAAAC,EAAA,KAAA,eAAa,SAAA,MAAM,CAAA,EAAA,MAAA;eACpD,SAAA,CAAA,OAAAD,MAAAC,EAAA,KAAA,eAAI,SAAA,6BAA6B,CAAA,EAAA,kBAAA;;;yDAI/B,SAAA,CAAA,MAAAD,MAAAC,EAAA,KAAA,eAAG,SAAA,uBAAuB,CAAA,EAAA,iBAAA;wCAE5B,SAAA,OAAO,CAAA,EAAA,kCAAA;wCAEP,SAAA,KAAK,CAAA,EAAA,kIAAA;;qDAIH,SAAA,CAAA,MAAAD,MAAAC,EAAA,KAAA,eAAG,SAAA,yBAAyB,CAAA,EAAA,WAAA;wCAE9B,SAAA,OAAO,CAAA,EAAA,uBAAA;wCAEP,SAAA,KAAK,CAAA,EAAA,2FAAA;;2DAIH,SAAA;wCAEF,SAAA,OAAO,CAAA,EAAA,2DAAA;wCAEP,SAAA,KAAK,CAAA,EAAA,GAAA;;eACL,SAAA,CAAA,UAAAD,MAAAC,EAAA,KAAA,eAAO,SAAA,+CAA+C,CAAA,EAAA,aAAA;cACtD,SAAA;eACA,SAAA,CAAA,SAAAD,MAAAC,EAAA,KAAA,eAAM,SAAA,0BAA0B,CAAA,EAAA,iBAAA;;;yDAI9B,SAAA,CAAA,MAAAD,MAAAC,EAAA,KAAA,eAAG,SAAA,qBAAqB,CAAA,EAAA,iBAAA;wCAE1B,SAAA,OAAO,CAAA,EAAA,2EAAA;wCAEP,SAAA,KAAK,CAAA,EAAA,wGAAAD,MAAAC,EAAA,KAAA,eAAqG,SAAA,oBAAoB,CAAA,EAAA,0BAAA;;0DAI5H,SAAA;wCAEF,SAAA,OAAO,CAAA,EAAA,2DAAA;wCAEP,SAAA,KAAK,CAAA,EAAA,GAAA;;eACL,SAAA,CAAA,iBAAAD,MAAAC,EAAA,KAAA,eAAc,SAAA;eACd,SAAA,CAAA,cAAAD,MAAAC,EAAA,KAAA,eAAW,SAAA;eACX,SAAA,CAAA,OAAAD,MAAAC,EAAA,KAAA,eAAI,SAAA,0BAA0B,CAAA,EAAA,QAAAD,MAAAC,EAAA,KAAA,eAAK,SAAA,yBAAyB,CAAA,EAAA,uBAAA;;;wBAI3D,SAAA;;;;;;mCAUA,SAAA;;;;;"}